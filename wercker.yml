# docker box definition
box:
  id: maven:latest
  ports:
    - "8080"

# defining build pipeline
build:
  steps:
    - script:
      name: Maven Package
      code: mvn package && echo "Package successfully created"
    
    - internal/docker-push:
            entrypoint: mkdir /app
            cmd: cp libs /app/libs
            cmd: ${project.artifactId}.jar /app
            cmd: java -jar /app/${project.artifactId}.jar
            working-dir: $WERCKER_ROOT
            tag: $WERCKER_GIT_COMMIT
            ports: "8080"
            username: $DOCKER_USERNAME
            password: $DOCKER_PASSWORD
            repository: $DOCKER_REPO
            registry: https://iad.ocir.io/v2
    - script:
      name: Container
      code: echo "Container successfully created"